{% extends 'base.html' %}

{% block content %}

  <div class="container">
      <br>

{% if projects %}
{% for p in projects %}
  <div class="card">
    <div class="card-body">
      <h5 class="card-title">{{ p.id }}: {{ p.title }}</h5>
      <p class="card-text">Project by: {{ p.user.first_name }} {{ p.user.last_name }}</p>
      <p class="card-text">Posted on: {{ p.timestamp }}</p>
      {% if request.user.is_student  %}
      {% if p.status == "open" %}
      <a href="{% url 'register_interest' p.id %}" class="btn btn-primary">Register Interest</a>
      {% elif p.status == "registered interest" %}
      <a href="{% url 'register_interest' p.id %}" class="btn btn-primary disabled">Registered Interest</a>
      {% endif%}
      {% endif%}
    </div>
  </div>
  <br>
{% endfor %}
{% endif %}

{% if request.user.is_client %}

{% for p in posted_by %}
{% if request.user == p.user %}
  <div class="card">
    <div class="card-body">
      <h5 class="card-title">{{ p.id }}: {{ p.title }}</h5>
      <p class="card-text">Project by: {{ p.user.first_name }} {{ p.user.last_name }}</p>
      <p class="card-text">Posted on: {{ p.timestamp }}</p>
      
      <p class="card-text">Interests registered by: {{ interests.user.first_name }} {{ interests.user.last_name }}</p>
      
      {% if request.user.is_student  %}
      {% if p.status == "open" %}
      <a href="{% url 'register_interest' p.id %}" class="btn btn-primary">Register Interest</a>
      {% elif p.status == "registered interest" %}
      <a href="{% url 'register_interest' p.id %}" class="btn btn-primary disabled">Registered Interest</a>
      {% endif%}
      {% endif%}
    </div>
  </div>
  <br>
{% endif %}
{% endfor %}

{% endif %}

</div>
{% endblock %}